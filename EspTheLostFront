local a=game:GetService("Players")local b=game:GetService("RunService")local c={}local d={}local e={}local f={}local function g(h)local i=workspace:FindFirstChild("___teams_")if not i then return nil end;local j=i:FindFirstChild("defenders")if j then local k=j:FindFirstChild(h.Name)if k then return"defenders"end end;local l=i:FindFirstChild("attackers")if l then local k=l:FindFirstChild(h.Name)if k then return"attackers"end end;return nil end;local function m(n)if n=="defenders"then return Color3.new(0,0,1)elseif n=="attackers"then return Color3.new(1,0,0)else return Color3.new(1,1,1)end end;local function o(p)if p==a.LocalPlayer then return end;local function q(r)if c[p]then c[p]:Destroy()c[p]=nil end;if d[p]then d[p]:Destroy()d[p]=nil end;local s=Instance.new("Highlight")s.Name="ESP"s.Adornee=r;s.Parent=r;s.FillTransparency=1;s.DepthMode=Enum.HighlightDepthMode.AlwaysOnTop;local t=Instance.new("BillboardGui")t.Name="PlayerNameESP"t.Adornee=r:WaitForChild("Head")t.Size=UDim2.new(0,200,0,50)t.StudsOffset=Vector3.new(0,3,0)t.AlwaysOnTop=true;t.MaxDistance=100;t.Parent=r;local u=Instance.new("TextLabel")u.Name="PlayerName"u.Size=UDim2.new(1,0,1,0)u.BackgroundTransparency=1;u.Text=p.Name;u.TextStrokeColor3=Color3.new(0,0,0)u.TextStrokeTransparency=0;u.TextSize=20;u.Font=Enum.Font.GothamBold;u.Parent=t;c[p]=s;d[p]=t;local function v()local w=g(p)local x=m(w)s.OutlineColor=x;u.TextColor3=x;if w then if w=="defenders"then u.Text="[D] "..p.Name elseif w=="attackers"then u.Text="[A] "..p.Name end else u.Text=p.Name end end;v()local y;y=b.Heartbeat:Connect(function()if not r or not r.Parent then y:Disconnect()return end;if s and s.Parent and u and u.Parent then v()else y:Disconnect()end end)r.AncestryChanged:Connect(function(_,z)if z==nil then if c[p]then c[p]:Destroy()c[p]=nil end;if d[p]then d[p]:Destroy()d[p]=nil end;if y then y:Disconnect()end end end)end;if p.Character then q(p.Character)end;p.CharacterAdded:Connect(q)end;local function A()local B=workspace:FindFirstChild("drones")if not B then return end;for C,D in pairs(B:GetChildren())do if not f[D]then local s=Instance.new("Highlight")s.Name="DroneESP"s.Adornee=D;s.Parent=D;s.FillTransparency=1;s.OutlineColor=Color3.new(0,1,0)s.DepthMode=Enum.HighlightDepthMode.AlwaysOnTop;local t=Instance.new("BillboardGui")t.Name="DroneNameESP"t.Adornee=D:FindFirstChild("Head")or D:FindFirstChildWhichIsA("BasePart")t.Size=UDim2.new(0,150,0,30)t.StudsOffset=Vector3.new(0,2,0)t.AlwaysOnTop=true;t.MaxDistance=80;t.Parent=D;local u=Instance.new("TextLabel")u.Name="DroneName"u.Size=UDim2.new(1,0,1,0)u.BackgroundTransparency=1;u.Text="Drone"u.TextColor3=Color3.new(0,1,0)u.TextStrokeColor3=Color3.new(0,0,0)u.TextStrokeTransparency=0;u.TextSize=16;u.Font=Enum.Font.GothamBold;u.Parent=t;f[D]=s end end end;for E,p in pairs(a:GetPlayers())do o(p)end;A()b.Heartbeat:Connect(function()A()end)a.PlayerAdded:Connect(o)a.PlayerRemoving:Connect(function(p)if c[p]then c[p]:Destroy()c[p]=nil end;if d[p]then d[p]:Destroy()d[p]=nil end end)workspace.ChildAdded:Connect(function(F)if F.Name=="drones"then A()end end)
